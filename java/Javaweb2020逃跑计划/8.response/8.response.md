# 目录

# HTTP协议:
# Response对象
# ServletContext对象
# 案例:



# HTTP协议:

### 1. 请求消息
### 2. 响应消息

1. 相应状态码

- 状态码都是3位数字 
- 分类
  - 1xx：服务器就收客户端消息，但没有接受完成，等待一段时间后，发送1xx多状态码
  - 2xx：成功。代表：200
  - 3xx：重定向。代表：302(重定向)，304(访问缓存)
  - 4xx：客户端错误。
  - 5xx：服务器端错误。代表：500(服务器内部出现异常)

2. 响应头:
- 格式：头名称： 值
- 常见的响应头
  - Content-Type：服务器告诉客户端本次响应体数据格式以及编码格式
  - Content-disposition：服务器告诉客户端以什么格式打开响应体数据
    - `in-line`:默认值,在当前页面内打开
    - `attachment;filename=xxx`：以附件形式打开响应体。文件下载
### 3. 响应空行

### 4. 响应体: 传输的数据

```

HTTP/1.1 200 
Content-Type: text/html;charset=utf-8
Content-Length: 42
Date: Tue, 21 Jan 2020 03:11:12 GMT
Keep-Alive: timeout=20
Connection: keep-alive

响应数据

```



# Response对象

功能: 设置响应消息


### 1. 设置响应行

1. 格式：HTTP/1.1 200 ok
2. 设置状态码：setStatus(int sc) 
状态码设置
```java

@Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    resp.setStatus(200);
}

```


### 2. 设置响应头

```java


@Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    resp.setHeader("-", "-");
}

```


### 3. 设置响应体

1. 获取输出流
- 字符输出流: `PrintWriter writer = resp.getWriter();`

```java

@Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    PrintWriter writer = resp.getWriter();
    writer.write("shawanyi?");
}

```


- 字节输出流:


2. 使用输出流, 将数据输出到客户端浏览器





# 重定向

### 重定向

啥玩意?: 资源跳转
代码:

```java

@Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    resp.setStatus(302);
    resp.sendRedirect("http://www.domanshow.com/app.apk");
}

```



### 重定向和转发


1. 重定向特点: `redirect`
- 地址栏发送变化
- 重定向可以访问其他站点资源
- 两次请求. 不能使用Request对象来共享数据


2. 转发的特点: forward
- 地址栏不变
- 转发只能访问当前服务器资源
- 一次请求. 可以使用Request对象来共享数据


